{% extends "zipline_app/base.html" %}
{% load humanize %}
{% load bootstrap3 %}

{% block content %}
<h1>{{ order.order_text }}</h1>

Order Details
<ul>
  <li>{{order.asset.asset_symbol}}</li>
  <li>{{order.order_side}}</li>
  <li>{{order.amount_unsigned|intcomma}}</li>
  <li><font color="red">{{order.filled|intcomma}}</font></li>
  <li>{{order.pub_date}}</li>
  <li>{{order.account.account_symbol}}</li>
  <li>Comment: {{ order.order_text }}</li>
</ul>

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

<font color="red">
{% if order.fills|length > 0 %}
    Current fills
    <ul>
    {% for fill in order.fills %}
        <li>
          {{fill.dt}}:
          {{fill.sid.symbol}},
          {{fill.amount|intcomma}},
          {{fill.price|intcomma}}
        </li>
    {% endfor %}
    </ul>
{% else %}
    <p>No fills are available.</p>
{% endif %}
</font>

<!--
Fill
<form action="{% url 'zipline_app:vote' order.id %}" method="post">
{% csrf_token %}
{% for fill in order.fill_set.all %}
    <input type="radio" name="fill" id="fill{{ forloop.counter }}" value="{{ fill.id }}" />
    <label for="fill{{ forloop.counter }}">
       {{fill.fill_side}},
       {{fill.fill_qty_unsigned}},
       {{fill.fill_price}},
       {{ fill.fill_text }}
    </label><br />
{% endfor %}
<input type="submit" value="Vote" />
</form>
-->

        <!-- delete with confirmation -->
        <a href="{% url 'zipline_app:orders-delete' order.id %}">Delete</a>

        <!-- delete without confirmation
        <form action="{% url 'zipline_app:orders-delete' order.id %}" method="post" class="form">
          {% csrf_token %}
          {% bootstrap_button content="Del" icon="minus" button_type="submit" %}
        </form>
        -->

        <a href="{% url 'zipline_app:orders-update' order.id %}">Edit</a>

{% endblock %}
