{% load humanize %}

{% if order.dedicated_fill is not None %}

  <div class='row'>
    <a href="{% url 'zipline_app:fills-detail' order.dedicated_fill.id %}">
      Fill #{{order.dedicated_fill.id}}
    </a>
    ({{order.dedicated_fill.user.username}},
     {{order.dedicated_fill.get_fill_status_display}},
     {{order.dedicated_fill.get_category_display}},
     {{order.dedicated_fill.get_is_internal_display}})
  </div>

{% else %}

  <div class='row text-right'>
  {% if order.filled == order.order_qty_signed %}
    Filled
  {% else %}
    {% if order.order_status == 'C' and order.filled != 0 %}
    {{order.filled|intcomma}} / {{order.order_qty_signed}}
    {% endif %}

    {% if order.order_status != 'C' %}
      <abbr title="Fill order #{{order.id}}">
        <a
          class="btn btn-xs"
          href="{% url 'zipline_app:fills-new' %}?order={{order.id}}&source=blotter-concealed"
        >
          <span class="glyphicon glyphicon-copy"></span>
        </a>
      </abbr>
    {% endif %}

  {% endif %}
  </div>

  {% if order.order_status == 'C' %}
    <div class='row text-right'>
    {% if order.filled != order.order_qty_signed %}
      {% if order.filled != 0 %}
      Partial
      {% else %}
      Cancelled
      {% endif %}
    {% else %}
      Filled yet cancelled!
    {% endif %}
    </div>
  {% endif %}

{% endif %}
